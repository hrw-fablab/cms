{% block content %}
    <div class="fl-content margin"
         data-width="large"
         data-margin="block-end"
         data-margin-size="large">
        {% include "atoms/heading.html" with value=value.title anchor=True %}
        {% if value.filter and value.headings %}
            {% regroup value.members.members_ordered by role as role_list %}
            {% for role in role_list %}
                <div class="margin" data-margin="block" data-margin-size="large">
                    {% if role.grouper != None %}
                        {% include "atoms/heading.html" with value=value.title anchor=True %}
                    {% else %}
                        {% include "atoms/heading.html" with value=value.title anchor=True %}
                    {% endif %}
                    <div class="fl-grid gap" data-size="{{ value.layout }}" data-gap="medium">
                        {% for element in role.list %}
                            {% if element.person.organisation == value.filter %}
                                {% include "molecules/person.html" with value=element.person role=role.grouper %}
                            {% endif %}
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        {% elif value.filter %}
            <div class="fl-grid gap" data-size="{{ value.layout }}" data-gap="medium">
                {% for element in value.members.members_ordered %}
                    {% if element.person.organisation == value.filter %}
                        {% include "molecules/person.html" with value=element.person role=element.role %}
                    {% endif %}
                {% endfor %}
            </div>
        {% elif value.headings %}
            {% regroup value.members.members_ordered by role as role_list %}
            {% for role in role_list %}
                <div class="margin" data-margin="block" data-margin-size="large">
                    {% if role.grouper != None %}
                        {% include "atoms/heading.html" with value=role.grouper anchor=True %}
                    {% else %}
                        {% include "atoms/heading.html" with value="Mitglieder" anchor=True %}
                    {% endif %}
                    <div class="fl-grid gap" data-size="{{ value.layout }}" data-gap="medium">
                        {% for element in role.list %}
                            {% include "molecules/person.html" with value=element.person role=role.grouper %}
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <div class="fl-grid gap" data-size="{{ value.layout }}" data-gap="medium">
                {% for element in value.members.members_ordered %}
                    {% include "molecules/person.html" with value=element.person role=element.role %}
                {% endfor %}
            </div>
        {% endif %}
    </div>
{% endblock content %}
